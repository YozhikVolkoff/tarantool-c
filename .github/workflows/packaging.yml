name: packaging

on: [push, pull_request]

jobs:
  build_package:
    # Skip pull request jobs when the source branch is in the same
    # repository.
    if: |
      github.event_name == 'push' ||
      github.event.pull_request.head.repo.full_name != github.repository
    runs-on: ubuntu-latest

    strategy:
      fail-fast: false
      matrix:
        platform:
          - { os: 'debian', dist: 'stretch' }
#          - { os: 'debian', dist: 'buster' }
 #         - { os: 'debian', dist: 'bullseye' }
  #        - { os: 'el', dist: '7' }
   #       - { os: 'el', dist: '8' }
    #      - { os: 'fedora', dist: '30' }
     #     - { os: 'fedora', dist: '31' }
      #    - { os: 'fedora', dist: '32' }
       #   - { os: 'fedora', dist: '33' }
#          - { os: 'fedora', dist: '34' }
 #         - { os: 'opensuse-leap', dist: '15.1' }
  #        - { os: 'opensuse-leap', dist: '15.2' }
   #       - { os: 'ubuntu', dist: 'xenial' }
    #      - { os: 'ubuntu', dist: 'bionic' }
     #     - { os: 'ubuntu', dist: 'focal' }
      #    - { os: 'ubuntu', dist: 'hirsute' }

    env:
      OS: ${{ matrix.platform.os }}
      DIST: ${{ matrix.platform.dist }}

    steps:
      - name: Deploy packages condition one
        # We need this step to run only on push with tag.
        if: ${{ github.event_name == 'push' && github.event.ref_type == 'tag' }}
        run: |
          echo "Success"

      - name Deploy packages condition two
        if ${{ github.event_name == 'create' && github.event.ref_type == 'tag' }}
        run: |
          echo "Success 2"

      - name Deploy packages condition three
        if: ${{ github.event_name == 'push' && contains(github.ref, 'refs/tags/') }}
        run: |
          echo "Success 3"

      - name Deploy packages condition four
        if: ${{ github.event_name == 'push' && startsWith(github.ref, 'refs/tags/') }}
        run: |
          echo "Success 4"
